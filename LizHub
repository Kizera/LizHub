local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- สร้างหน้าต่าง (Liz Hub v1.1)
local Window = Fluent:CreateWindow({
    Title = "Liz Hub v1.1",
    SubTitle = "Auto Skill + Misc",
    TabWidth = 160,
    Size = UDim2.fromOffset(500, 350),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl
})

-- Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer

-- Config
local Config = {
    AutoSkill = false,
    SkillDelay = 0.5,
    AntiAFK = false,
    OffVFX = false,
    ReduceLag = false
}

-- Tabs
local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    Misc = Window:AddTab({ Title = "Misc", Icon = "component" })
}

-- =========================================================
-- SYSTEM: LOOPS
-- =========================================================

-- Loop 1: Auto Skill
task.spawn(function()
    while true do
        if Config.AutoSkill then
            local args = { "MadaraFifth" }
            local remote = ReplicatedStorage:FindFirstChild("Remotes")
            if remote and remote:FindFirstChild("AbilityHandler") then
                remote.AbilityHandler:FireServer(unpack(args))
            end
        end
        
        if Config.SkillDelay > 0 then task.wait(Config.SkillDelay) else task.wait() end
    end
end)

-- Loop 2: Misc Systems (Lag/VFX)
task.spawn(function()
    while true do
        -- Reduce Lag (Hide Damage Numbers)
        if Config.ReduceLag then
            pcall(function()
                for _, gui in pairs(LocalPlayer.PlayerGui:GetChildren()) do
                    if gui.Name:lower():match("damage") or gui.Name:lower():match("indicator") then
                        gui.Enabled = false
                    end
                end
            end)
        else
            -- Restore (Optional: ถ้าปิดก็ให้มันกลับมา)
            pcall(function()
                for _, gui in pairs(LocalPlayer.PlayerGui:GetChildren()) do
                    if gui.Name:lower():match("damage") then
                        gui.Enabled = true
                    end
                end
            end)
        end

        -- Off VFX (Clear Effects)
        if Config.OffVFX then
            pcall(function()
                if LocalPlayer.Backpack:FindFirstChild("Scripts") then
                    LocalPlayer.Backpack.Scripts.NewModules:Destroy()
                end
            end)
            
            for _, o in pairs(Workspace:GetChildren()) do
                if o.Name:match("HitPart") or o.Name:match("Splash") then o:Destroy() end
            end
            
            local effects = {"Particles", "NewEffects", "KevSFX", "VFX", "ReiNew"}
            for _, name in pairs(effects) do
                if ReplicatedStorage:FindFirstChild(name) then
                    ReplicatedStorage[name]:Destroy()
                end
            end
        end
        task.wait(1)
    end
end)

-- =========================================================
-- UI SETTINGS
-- =========================================================

-- [[ Main Tab ]]
Tabs.Main:AddToggle("AutoSkillToggle", {
    Title = "Auto Skill",
    Default = false,
    Callback = function(Value) Config.AutoSkill = Value end
})

Tabs.Main:AddSlider("DelaySlider", {
    Title = "Delay",
    Default = 0.5,
    Min = 0,
    Max = 2,
    Rounding = 2,
    Callback = function(Value) Config.SkillDelay = Value end
})

-- [[ Misc Tab ]]
Tabs.Misc:AddToggle("AntiAFKToggle", {
    Title = "Anti AFK",
    Default = false,
    Callback = function(Value)
        Config.AntiAFK = Value
        if Value then
            LocalPlayer.Idled:Connect(function()
                if Config.AntiAFK then
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton2(Vector2.new())
                end
            end)
        end
    end
})

Tabs.Misc:AddToggle("OffVFXToggle", {
    Title = "Off VFX",
    Default = false,
    Callback = function(Value) Config.OffVFX = Value end
})

Tabs.Misc:AddToggle("ReduceLagToggle", {
    Title = "Reduce Lag",
    Default = false,
    Callback = function(Value) Config.ReduceLag = Value end
})

-- Init
Window:SelectTab(1)
Fluent:Notify({
    Title = "Liz Hub v1.1",
    Content = "Misc Menu Added!",
    Duration = 3
})
